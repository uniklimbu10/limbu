!function(e,r){"object"==typeof exports&&"undefined"!=typeof module?module.exports=r(require("chart.js")):"function"==typeof define&&define.amd?define(["chart.js"],r):(e=e||self).PluginErrorbars=r(e.Chart)}(this,function(e){"use strict";var r={color:void 0,width:10,lineWidth:2,absoluteValues:!1},a={id:"chartJsPluginErrorBars",_getBarchartBaseCoords:function(e){var r=[];return e.data.datasets.forEach(function(a,t){var o=e.getDatasetMeta(t).data,l=a.data;r.push(o.map(function(r,a){return{label:r._model.label?r._model.label:e.data.labels[a],value:l[a],x:r._model.x,y:r._model.y,color:r._model.borderColor}}))}),r},_isHorizontal:function(e){return"horizontalBar"===e.config.type},_computeWidth:function(e,r,a){var t=a;try{if("string"==typeof a)if(a.match(/px/))t=parseInt(a.replace(/px/,""),10);else{var o=Math.min(100,Math.abs(Number(a.replace(/%/,"")))),l=e.getDatasetMeta(0).data[0]._model;"line"===e.config.type?t=parseInt(l.controlPointPreviousX+l.controlPointNextX,10):r?t=parseInt(l.height,10):r||(t=parseInt(l.width,10)),t*=o/100}}catch(e){console.error(e)}finally{Number.isNaN(t)&&(t=a)}return t},_drawErrorBar:function(e,r,a,t,o,l,n,i){e.save(),e.lineWidth=l,e.strokeStyle=o,e.lineWidth=l,e.beginPath(),i?(e.moveTo(t,r.y-n/2),e.lineTo(t,r.y+n/2),e.moveTo(t,r.y),e.lineTo(a,r.y),e.moveTo(a,r.y-n/2),e.lineTo(a,r.y+n/2)):(e.moveTo(r.x-n/2,a),e.lineTo(r.x+n/2,a),e.moveTo(r.x,a),e.lineTo(r.x,t),e.moveTo(r.x-n/2,t),e.lineTo(r.x+n/2,t)),e.stroke(),e.restore()},_resolveScale:function(e,r,a){var t=e.data.datasets[a].xAxisID||"x-axis-0",o=e.data.datasets[a].yAxisID||"y-axis-0",l=r?t:o;return e.scales[l]},afterDatasetsDraw:function(e,a,t){var o=this;if(e.__renderedOnce=e.__renderedOnce||1===a,e.__renderedOnce){t=Object.assign({},r,t);var l=e.data.datasets.map(function(e){return e.errorBars}),n=this._getBarchartBaseCoords(e);if(n&&n[0]&&n[0][0]&&l){var i=this._isHorizontal(e),s=(Array.isArray(t.width)?t.width:[t.width]).map(function(r){return o._computeWidth(e,i,r)}),c=Array.isArray(t.lineWidth)?t.lineWidth:[t.lineWidth],u=Array.isArray(t.color)?t.color:[t.color],d=e.ctx;d.save(),n.forEach(function(r,a){var n=o._resolveScale(e,i,a);r.forEach(function(e){var r=l[a];if(r){var h=Object.hasOwnProperty.call(r,e.label),f=null;if(h?f=r[e.label]:!h&&e.label&&e.label.label&&Object.hasOwnProperty.call(r,e.label.label)&&(f=r[e.label.label]),f){var y=Array.isArray(f)?f:[f],p=n.getRightValue(e.value);y.forEach(function(r,a){var l=u[a%u.length]?u[a%u.length]:e.color,h=c[a%c.length],f=s[a%s.length],y=t.absoluteValues?r.plus:p+Math.abs(r.plus),b=t.absoluteValues?r.minus:p-Math.abs(r.minus),v=n.getPixelForValue(y),m=n.getPixelForValue(b);o._drawErrorBar(d,e,v,m,l,h,f,i)})}}})}),d.restore()}}}};return(e=e&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e).pluginService.register(a),a});